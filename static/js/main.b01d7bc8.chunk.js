(this["webpackJsonparc-viewer"]=this["webpackJsonparc-viewer"]||[]).push([[0],{125:function(e,n){},142:function(e){e.exports=JSON.parse('{"data_fetcher":{"welcome":"Willkommen im","info":"Klicke hier oder ziehe beliebige Arc JSON Dateien hierher um fortzufahren","info_while_dragging":"Ziehe beliebige Arc JSON Dateien hierher um fortzufahren","loading":"Lade Daten..."},"mapview":{"animation":{"play":"Play","pause":"Pause","frames_per_second":"Bilder pro Sekunde","sample_increment_per_frame":"Samples springen pro Frame","info":"Controls verstecken mit (H), Play/Pause mit (SPACE)"},"sample_1_to_x_of_y":"Sample 1-{{x}} von {{y}}"}}')},143:function(e){e.exports=JSON.parse('{"data_fetcher":{"welcome":"Welcome to","info":"Click or drop any Arc JSON files here to continue","info_while_dragging":"Drop your Arc JSON files here to continue","loading":"Loading data..."},"mapview":{"animation":{"play":"Play","pause":"Pause","frames_per_second":"Frames per second","sample_increment_per_frame":"Samples increment per frame","info":"Hide controls with (H), Play/Pause with (SPACE)"},"sample_1_to_x_of_y":"Sample 1-{{x}} of {{y}}"}}')},172:function(e,n,t){},183:function(e,n){},192:function(e,n,t){},193:function(e,n,t){"use strict";t.r(n);var a=t(1),i=t.n(a),r=t(140),c=t.n(r),o=t(126),l=t(98),s=t(141),u=t(142),d=t(143);o.a.use(s.a).use(l.e).init({fallbackLng:"en",debug:!0,resources:{de:u,en:d},interpolation:{escapeValue:!1}}).catch((function(e){console.warn("Could not initialise translation services:",e)}));o.a;var m,f=t(2),h=t(10),j=t(72),b=t.n(j),p=(t(169),t(212)),g=(t(172),t(209)),v=t(211),O=t(206),x=t(152),w=t(44),k=t.n(w);!function(e){e.Unknown="unknown",e.Bogus="bogus",e.Stationary="stationary",e.Walking="walking",e.Running="running",e.Cycling="cycling",e.Car="car",e.Airplane="airplane",e.Train="train",e.Bus="bus",e.Motorcycle="motorcycle",e.Boat="boat",e.Tram="tram",e.Tractor="tractor",e.Tuktuk="tuktuk",e.Songthaew="songthaew",e.Scooter="scooter",e.Metro="metro",e.CableCar="cableCar",e.Funicular="funicular",e.Chairlift="chairlift",e.SkiLift="skiLift",e.Taxi="taxi",e.Skateboarding="skateboarding",e.InlineSkating="inlineSkating",e.Snowboarding="snowboarding",e.Skiing="skiing",e.Horseback="horseback",e.Swimming="swimming",e.Golf="golf",e.Wheelchair="wheelchair",e.Rowing="rowing",e.Kayaking="kayaking"}(m||(m={}));m.Unknown,m.Bogus,m.Stationary,m.Walking,m.Running,m.Cycling,m.Car,m.Airplane,m.Train,m.Bus,m.Motorcycle,m.Boat,m.Tram,m.Tractor,m.Tuktuk,m.Songthaew,m.Scooter,m.Metro,m.CableCar,m.Funicular,m.Chairlift,m.SkiLift,m.Taxi,m.Skateboarding,m.InlineSkating,m.Snowboarding,m.Skiing,m.Horseback,m.Swimming,m.Golf,m.Wheelchair,m.Rowing,m.Kayaking;var S=function(e){switch(e){case m.Motorcycle:case m.Scooter:return k.a.hsl(8,74,57);case m.Running:return k.a.hsl(27,84,51);case m.Tuktuk:case m.Songthaew:return k.a.hsl(41,72,41);case m.Tram:case m.Train:case m.SkiLift:case m.Metro:case m.Funicular:case m.Chairlift:case m.CableCar:return k.a.hsl(48,55,43);case m.Walking:case m.Wheelchair:case m.Golf:return k.a.hsl(148,80,36);case m.Skateboarding:return k.a.hsl(186,76,39);case m.Cycling:case m.Swimming:case m.Rowing:case m.Kayaking:return k.a.hsl(196,97,42);case m.Snowboarding:return k.a.hsl(205,41,48);case m.Boat:return k.a.hsl(223,91,60);case m.Bus:return k.a.hsl(229,48,48);case m.Skiing:return k.a.hsl(229,57,35);case m.Car:case m.Taxi:return k.a.hsl(231,14,36);case m.Tractor:return k.a.hsl(233,16,21);case m.Airplane:case m.Horseback:return k.a.hsl(277,76,47);case m.InlineSkating:return k.a.hsl(339,63,59);case m.Unknown:case m.Bogus:case m.Stationary:default:return k.a.hsl(0,0,60)}},y=t(14),_={longitude:-3.195,latitude:55.94,zoom:13},C=function(e){var n=e.data,t=n.filter((function(e){return e.activityType&&e.samples&&e.samples.length>0})).map((function(e){var n;return{color:S(e.activityType).rgb().array(),name:e.startDate,path:(null!==(n=e.samples)&&void 0!==n?n:[]).filter((function(e){return e&&e.location&&void 0!==e.location.longitude&&void 0!==e.location.latitude})).map((function(e){var n,t;return[null===e||void 0===e||null===(n=e.location)||void 0===n?void 0:n.longitude,null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude]}))}})),a=n.filter((function(e){return e.place})).map((function(e){var n,t;return{name:null!==(n=null===(t=e.place)||void 0===t?void 0:t.name)&&void 0!==n?n:"Stationary",coordinates:[e.center.longitude,e.center.latitude]}})),i=[new g.a({id:"path-layer",data:t,rounded:!0,pickable:!0,widthScale:1,widthMinPixels:5,getPath:function(e){return e.path},getColor:function(e){return e.color},getWidth:function(){return 2}}),new v.a({id:"scatterplot-layer",data:a,pickable:!0,opacity:.8,stroked:!0,filled:!0,radiusScale:6,radiusMinPixels:1,radiusMaxPixels:8,lineWidthMinPixels:2,getPosition:function(e){return e.coordinates},getRadius:function(){return 15},getFillColor:function(){return[0,69,202]},getLineColor:function(){return[255,255,255]}})];return Object(y.jsx)(O.a,{width:"100%",height:"100%",initialViewState:_,controller:!0,layers:i,children:Object(y.jsx)(x.a,{mapStyle:"mapbox://styles/mapbox/light-v10",width:"100%",height:"100%",mapboxApiAccessToken:"pk.eyJ1IjoiZHViZW5odWJsZXIiLCJhIjoiY2s4OGZwYXllMDdsNzN1bXF4NzNjcjViNCJ9.xzG0iX8JJCD8pdxnu-mcYg",onLoad:function(){return console.timeEnd("time to first mapview render")}})})},N=function(e){var n,t,i,r,c,o=e.data;window.arc=o;var l=Object(p.a)("mapview",{useSuspense:!1}).t,s=Object(a.useState)([]),u=Object(h.a)(s,2),d=u[0],m=u[1],j=Object(a.useState)([]),g=Object(h.a)(j,2),v=g[0],O=g[1],x=Object(a.useState)(!0),w=Object(h.a)(x,2),k=w[0],S=w[1],_=Object(a.useState)(0),N=Object(h.a)(_,2),P=N[0],M=N[1],T=Object(a.useState)(33),A=Object(h.a)(T,2),D=A[0],E=A[1],I=Object(a.useState)(50),J=Object(h.a)(I,2),L=J[0],Y=J[1],W=Object(a.useState)(!1),B=Object(h.a)(W,2),z=B[0],H=B[1],R=Object(a.useState)(0),F=Object(h.a)(R,2),V=F[0],G=F[1];Object(a.useEffect)((function(){var e=function(e){"h"===e.key?H(!z):" "===e.key&&S(!k)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[k,z]),Object(a.useEffect)((function(){k||setTimeout((function(){G(V+L>=P?0:V+L)}),D)}),[V,k,D,L,P]),Object(a.useEffect)((function(){if(console.log(o),o.length>0){m(o);var e=o.filter((function(e){return!e.place})).reduce((function(e,n){var t,a;return e+(null!==(t=null===(a=n.samples)||void 0===a?void 0:a.length)&&void 0!==t?t:0)}),0)-1;M(e),G(e),O(o.filter((function(e){return!e.place})).flatMap((function(e){var n;return null!==(n=e.samples)&&void 0!==n?n:[]})))}}),[o]),Object(a.useEffect)((function(){var e=0;m(o.filter((function(e){return!e.place})).map((function(n){var t,a,i,r,c,o,l=e;if(e+=null!==(t=null===(a=n.samples)||void 0===a?void 0:a.length)&&void 0!==t?t:0,V>e)return n;var s=V-l;return s>(null!==(i=null===(r=n.samples)||void 0===r?void 0:r.length)&&void 0!==i?i:0)?Object(f.a)(Object(f.a)({},n),{},{samples:[]}):Object(f.a)(Object(f.a)({},n),{},{samples:null!==(c=null===(o=n.samples)||void 0===o?void 0:o.filter((function(e,n){return n<s})))&&void 0!==c?c:[]})})))}),[V,o]);return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)("div",{className:"controls",style:{display:z?"none":"block"},children:Object(y.jsxs)("table",{children:[Object(y.jsx)("thead",{}),Object(y.jsxs)("tbody",{children:[Object(y.jsxs)("tr",{children:[Object(y.jsxs)("td",{children:[l("animation.frames_per_second"),":"]}),Object(y.jsx)("td",{children:Object(y.jsx)("input",{type:"range",min:17,max:1e3,value:D,disabled:!k,onChange:function(e){return E(Number.parseInt(e.target.value,10))}})}),Object(y.jsx)("td",{children:Math.round(1e3/D)})]}),Object(y.jsxs)("tr",{children:[Object(y.jsxs)("td",{children:[l("animation.sample_increment_per_frame"),":"]}),Object(y.jsx)("td",{children:Object(y.jsx)("input",{type:"range",min:1,max:2e3,value:L,disabled:!k,onChange:function(e){return Y(Number.parseInt(e.target.value,10))}})}),Object(y.jsx)("td",{children:L})]}),Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:3,children:Object(y.jsx)("button",{className:"button",onClick:function(){return S(!k),!1},type:"button",children:l(k?"animation.play":"animation.pause")})})}),Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:3,children:l("animation.info")})})]})]})}),Object(y.jsxs)("div",{className:"timeline",style:{display:z?"none":"block"},children:[Object(y.jsxs)("div",{className:"currentDate",children:[b()(null===(n=v[V])||void 0===n?void 0:n.date).format("dddd, DD.MM.YYYY HH:mm")," -"," ",b()(null===(t=v[V])||void 0===t?void 0:t.date).valueOf()," -"," ",b()(null===(i=v[V])||void 0===i?void 0:i.date).toISOString()]}),Object(y.jsx)("input",{type:"range",min:0,max:P,value:V,disabled:!k,onChange:function(e){return G(Number.parseInt(e.target.value,10))}}),Object(y.jsxs)("div",{className:"date-range",children:[Object(y.jsx)("p",{children:b()(null===(r=v[0])||void 0===r?void 0:r.date).format("DD.MM.YYYY")}),Object(y.jsx)("p",{children:l("sample_1_to_x_of_y",{x:V+1,y:P+1})}),Object(y.jsx)("p",{children:b()(null===(c=v[v.length-1])||void 0===c?void 0:c.date).format("DD.MM.YYYY")})]})]}),Object(y.jsx)(C,{data:d})]})},P=t(155),M=t.p+"static/media/arc-viewer-logo.e6796b8f.png";t(192);var T=function(e){var n=e.urls,t=e.component,i=Object(p.a)("data_fetcher").t,r=Object(a.useState)([]),c=Object(h.a)(r,2),o=c[0],l=c[1],s=Object(a.useCallback)((function(e){(function(e){return new Promise((function(n,t){try{var a=e.map((function(e){return new Promise((function(n,t){var a=new FileReader;a.addEventListener("abort",t),a.addEventListener("error",t),a.addEventListener("load",(function(){try{console.timeEnd("reading file ".concat(e.name)),console.time("parsing file ".concat(e.name));var i=JSON.parse(a.result);console.timeEnd("parsing file ".concat(e.name)),n(i)}catch(r){t(r)}})),a.readAsText(e),console.time("reading file ".concat(e.name))}))}));Promise.all(a).then((function(e){console.time("merging dataset");var t=e.flatMap((function(e){return e.timelineItems}));console.timeEnd("merging dataset"),console.time("time to first mapview render"),n(t)}))}catch(i){t(i)}}))})(e).then(l)}),[]),u=Object(P.a)({onDrop:s}),d=u.getRootProps,m=u.getInputProps,j=u.isDragActive;return Object(a.useEffect)((function(){n?function(e){return Promise.all(e.map((function(e){return fetch(e).then((function(e){return e.json()})).then((function(e){return e.timelineItems}))}))).then((function(e){return{timelineItems:e.flat()}}))}(n).then((function(e){var n;l(null!==(n=e.timelineItems)&&void 0!==n?n:[])})):l([])}),[n]),0!==o.length||n?0===o.length&&n?Object(y.jsx)("div",{className:"page-background",children:Object(y.jsxs)("div",{className:"dropzone",children:[Object(y.jsx)("img",{src:"../assets/arc-viewer-logo.png",alt:""}),Object(y.jsx)("h3",{children:i("welcome")}),Object(y.jsx)("h1",{children:"Arc Viewer"}),Object(y.jsx)("p",{children:i("loading")})]})}):Object(y.jsx)(t,{data:o}):Object(y.jsx)("div",{className:"page-background",children:Object(y.jsxs)("div",Object(f.a)(Object(f.a)({className:"dropzone"},d()),{},{children:[Object(y.jsx)("img",{src:M,alt:""}),Object(y.jsx)("h3",{children:i("welcome")}),Object(y.jsx)("h1",{children:"Arc Viewer"}),Object(y.jsx)("input",Object(f.a)({},m())),j?Object(y.jsx)("p",{children:i("info_while_dragging")}):Object(y.jsx)("p",{children:i("info")})]}))})},A=function(){return Object(y.jsx)(T,{component:N})};c.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(A,{})}),document.querySelector("#root"))}},[[193,1,2]]]);
//# sourceMappingURL=main.b01d7bc8.chunk.js.map